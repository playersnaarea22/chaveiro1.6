<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chaveiros Placa Mercosul Premium - Personaliza√ß√£o Passo a Passo</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap');
        
        @font-face {
            font-family: 'FE-FONT';
            src: url('fonts/FE-FONT.ttf') format('truetype');
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --secondary: #8b5cf6;
            --accent: #ec4899;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #1e293b;
            --light: #f8fafc;
            --glass: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: #0f0f1e;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Animated Background */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: linear-gradient(125deg, #0f0f1e 0%, #1a1a3e 50%, #0f0f1e 100%);
        }

        .gradient-orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(100px);
            opacity: 0.5;
            animation: float 20s infinite ease-in-out;
        }

        .orb1 {
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, var(--primary) 0%, transparent 70%);
            top: -200px;
            left: -200px;
            animation-delay: 0s;
        }

        .orb2 {
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, var(--secondary) 0%, transparent 70%);
            bottom: -150px;
            right: -150px;
            animation-delay: 5s;
        }

        .orb3 {
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, var(--accent) 0%, transparent 70%);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation-delay: 10s;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); }
            25% { transform: translate(100px, -100px) scale(1.1); }
            50% { transform: translate(-100px, 100px) scale(0.9); }
            75% { transform: translate(50px, 50px) scale(1.05); }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        /* Header */
        .header {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 30px;
            padding: 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
            margin-bottom: 40px;
            animation: slideDown 0.8s ease-out;
        }

        .header h1 {
            font-size: 3.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 25%, #ec4899 50%, #f59e0b 75%, #6366f1 100%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradient-shift 3s ease infinite;
            margin-bottom: 15px;
        }

        @keyframes gradient-shift {
            0% { background-position: 0% center; }
            50% { background-position: 100% center; }
            100% { background-position: 0% center; }
        }

        .header p {
            font-size: 1.3rem;
            color: rgba(255,255,255,0.8);
            font-weight: 300;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Progress Bar */
        .progress-container {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
        }

        .progress-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            margin-bottom: 20px;
        }

        .progress-line {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 4px;
            background: rgba(255,255,255,0.1);
            transform: translateY(-50%);
            z-index: 1;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 2px;
            transition: width 0.5s ease;
            width: 0%;
        }

        .step-indicator {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 1.2rem;
            position: relative;
            z-index: 2;
            transition: all 0.3s ease;
            border: 3px solid rgba(255,255,255,0.2);
            background: rgba(255,255,255,0.1);
            color: rgba(255,255,255,0.6);
        }

        .step-indicator.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-color: white;
            transform: scale(1.1);
            box-shadow: 0 10px 30px rgba(99,102,241,0.4);
        }

        .step-indicator.completed {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }

        .step-info {
            text-align: center;
            color: white;
        }

        .step-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .step-description {
            color: rgba(255,255,255,0.7);
            font-size: 1rem;
        }

        /* Main Content */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            animation: fadeIn 1s ease-out 0.4s both;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Preview Section */
        .preview-section {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 30px;
            padding: 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .preview-title {
            font-size: 2rem;
            font-weight: 700;
            color: white;
            margin-bottom: 30px;
            text-align: center;
        }

       .plate-container {
    perspective: 1000px;
    margin-bottom: 40px;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    transform-origin: center center;
    transition: transform 0.3s ease;
}

        .plate-preview {
    width: 450px;
    height: 150px;
    background: linear-gradient(145deg, #f8f8f8, #e0e0e0);
    border: 3px solid #000000;
    border-radius: 15px;
    position: relative;
    overflow: hidden;
    box-shadow: 
        0 20px 40px rgba(0,0,0,0.3),
        inset 0 2px 5px rgba(255,255,255,0.5),
        inset 0 -2px 5px rgba(0,0,0,0.1);
    transform-style: preserve-3d;
    transition: transform 0.6s ease;
    cursor: move;
    transform-origin: center center;
}

        .plate-preview:hover {
            transform: rotateY(10deg) rotateX(-5deg);
        }

        .mercosul-band {
    background: linear-gradient(135deg, #1a4a7a 0%, #2d5aa0 50%, #1a4a7a 100%);
    color: rgb(255, 255, 255);
    width: 100%;
    height: 26.67%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 0.8em;
    letter-spacing: 0.133em;
    padding: 0 1.33%;
    position: absolute;
    top: 0;
    left: 0;
    overflow: hidden;
    z-index: 2;
}

        .mercosul-logo {
    height: 55%;
    margin-right: 0.667em;
    margin-left: -1em;
    display: block;
}

        /* CORRE√á√ÉO PRINCIPAL: Container para √°rea branca */
        .plate-content {
    position: absolute;
    top: 26.67%;
    left: 0;
    right: 0;
    bottom: 0;
    height: 73.33%;
    overflow: hidden;
}

        .plate-text {
    font-family: 'FE-FONT', 'Arial Black', sans-serif;
    font-size: 2.8em;
    font-weight: 900;
    text-align: center;
    letter-spacing: 0.095em;
    position: absolute;
    transform: translate(-50%, -50%);
    white-space: nowrap;
    width: auto;
    margin: 0;
    padding: 0;
}

        .plate-emoji {
    font-size: 2.67em;
    position: absolute;
    transition: all 0.3s ease;
    animation: emojiFloat 3s ease-in-out infinite;
    transform: translate(-50%, -50%);
}

        @keyframes emojiFloat {
            0%, 100% { transform: translate(-50%, -50%) translateY(0) rotate(0deg); }
            50% { transform: translate(-50%, -50%) translateY(-5px) rotate(10deg); }
        }

        .price-section {
            background: linear-gradient(135deg, var(--success), #059669);
            padding: 30px;
            border-radius: 20px;
            margin: 30px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(16,185,129,0.3);
        }

        .price {
            font-size: 3rem;
            font-weight: 800;
            color: white;
            margin: 15px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        /* Step Content */
        .step-content {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 30px;
            padding: 40px;
            position: relative;
            overflow: hidden;
        }

        .step-form {
            display: none;
        }

        .step-form.active {
            display: block;
            animation: fadeInUp 0.5s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .form-group {
            margin-bottom: 30px;
        }

        .form-group label {
            display: block;
            margin-bottom: 12px;
            font-weight: 600;
            color: white;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group input {
    width: 100%;
    padding: 20px;
    border: 2px solid rgba(255,255,255,0.1);
    border-radius: 15px;
    background: rgba(255,255,255,0.05);
    color: white;
    font-size: 18px;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
}

.form-group select {
    width: 100%;
    padding: 20px;
    border: 2px solid rgba(255,255,255,0.1);
    border-radius: 15px;
    background: rgba(255,255,255,0.9) !important;
    color: #333 !important;
    font-size: 18px;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
}
.form-group select option {
    background: #2a2a2a !important;
    color: white !important;
    padding: 10px;
}

.form-group select {
    background: rgba(255,255,255,0.1) !important;
    color: white !important;
}

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255,255,255,0.1);
            box-shadow: 0 0 20px rgba(99,102,241,0.3);
        }

        .color-picker {
            width: 100%;
            height: 80px;
            border: none;
            border-radius: 15px;
            cursor: pointer;
        }

        .color-picker::-webkit-color-swatch-wrapper {
            padding: 0;
        }

        .color-picker::-webkit-color-swatch {
            border: none;
            border-radius: 15px;
        }

        .position-controls {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 20px;
        }

        .position-btn {
            padding: 20px;
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 15px;
            background: rgba(255,255,255,0.05);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            transition: all 0.3s ease;
            color: white;
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
            min-height: 80px;
        }

        .position-btn:hover {
            border-color: var(--primary);
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(99,102,241,0.3);
        }

        .position-btn.selected {
            background: var(--primary);
            border-color: var(--primary);
        }

        .emoji-categories {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .emoji-category {
            padding: 12px 24px;
            border-radius: 25px;
            background: rgba(255,255,255,0.1);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            border: 2px solid transparent;
            font-weight: 500;
        }

        .emoji-category:hover,
        .emoji-category.active {
            background: var(--primary);
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .emoji-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 15px;
            max-height: 300px;
            overflow-y: auto;
            padding: 15px;
        }

        .emoji-btn {
            width: 70px;
            height: 70px;
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 15px;
            background: rgba(255,255,255,0.05);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            transition: all 0.3s ease;
        }

        .emoji-btn:hover {
            border-color: var(--primary);
            background: rgba(99,102,241,0.2);
            transform: scale(1.1);
        }

        .emoji-btn.selected {
            background: var(--primary);
            border-color: var(--primary);
        }

        /* Navigation Buttons */
        .step-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            gap: 20px;
        }

        .nav-btn {
            padding: 18px 40px;
            border: none;
            border-radius: 20px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .nav-btn.btn-prev {
            background: rgba(255,255,255,0.1);
            color: white;
            border: 2px solid rgba(255,255,255,0.2);
        }

        .nav-btn.btn-prev:hover:not(:disabled) {
            background: rgba(255,255,255,0.2);
            transform: translateY(-3px);
        }

        .nav-btn.btn-next {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            flex: 1;
            max-width: 300px;
        }

        .nav-btn.btn-next:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(99,102,241,0.4);
        }

        .nav-btn.btn-finish {
            background: linear-gradient(135deg, var(--success), #059669);
            color: white;
            flex: 1;
        }

        .nav-btn.btn-finish:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(16,185,129,0.4);
        }

        /* Instructions */
        .step-instructions {
            background: rgba(99,102,241,0.1);
            border: 1px solid rgba(99,102,241,0.3);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            color: white;
        }

        .step-instructions h3 {
            margin-bottom: 10px;
            color: var(--primary);
        }

        .step-instructions p {
            opacity: 0.9;
            line-height: 1.6;
        }

        /* Responsive */
        @media (max-width: 500px) {
    .plate-container {
        transform: scale(0.7);
        margin-bottom: 20px;
    }
}

@media (max-width: 400px) {
    .plate-container {
        transform: scale(0.6);
        margin-bottom: 10px;
    }
}

@media (max-width: 350px) {
    .plate-container {
        transform: scale(0.55);
        margin-bottom: 5px;
    }
}


        #countryText {
            flex: 1;
            text-align: center;
            font-weight: bold;
            font-size: 15px;
            letter-spacing: 2px;
            margin-top: 6px;
        }

        .brasil-flag {
    height: 47.5%;
    margin-left: 0.667em;
    margin-right: -0.667em;
    display: block;
}

        .qrcode-logo {
            position: absolute;
            left: 3px;
            bottom: 50px;
            height: 26px;
            margin: 0;
            z-index: 2;
        }

        .br-logo {
            position: absolute;
            right: 15px;
            top: 15px;
            height: 18px;
            margin: 0;
            z-index: 2;
        }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <div class="animated-bg">
        <div class="gradient-orb orb1"></div>
        <div class="gradient-orb orb2"></div>
        <div class="gradient-orb orb3"></div>
    </div>

    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>üéØ Criador de Chaveiros Premium</h1>
            <p>Personalize seu chaveiro em poucos passos simples</p>
        </header>

        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-line">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="step-indicator active" data-step="1">1</div>
                <div class="step-indicator" data-step="2">2</div>
                <div class="step-indicator" data-step="3">3</div>
                <div class="step-indicator" data-step="4">4</div>
                <div class="step-indicator" data-step="5">5</div>
                <div class="step-indicator" data-step="6">6</div>
                <div class="step-indicator" data-step="7">7</div>
                <div class="step-indicator" data-step="8">8</div>
            </div>
            <div class="step-info">
                <div class="step-title" id="stepTitle">Passo 1: Texto da Placa</div>
                <div class="step-description" id="stepDescription">Digite o texto que aparecer√° na sua placa personalizada</div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Preview Section -->
            <div class="preview-section">
                <h2 class="preview-title">üëÄ Preview em Tempo Real</h2>
                
                <div class="plate-container">
                    <div class="plate-preview" id="platePreview">
                        <div class="mercosul-band" id="mercosulBand">
                            <img src="imagens/mercosul-logo.png" alt="Mercosul" class="mercosul-logo">
                            <div class="mercosul-center" id="countryText">BRASIL</div>
                            <img src="imagens/brasil-flag.png" alt="Bandeira do Brasil" class="brasil-flag">
                        </div>
                        <div class="plate-content">
                            <div class="plate-text" id="plateText">Seu Nome</div>
                            <div class="plate-emoji" id="plateEmoji"></div>
                        </div>
                    </div>
                </div>
            
                </div>
            </div>

            <!-- Step Content -->
            <div class="step-content">
                <!-- Step 1: Text Input -->
                <div class="step-form active" id="step1">
                    <div class="step-instructions">
                        <h3>üìù Defina o Texto Principal</h3>
                        <p>Este ser√° o texto principal que aparecer√° na sua placa. Pode ser letras, n√∫meros ou uma combina√ß√£o de ambos. M√°ximo de 16 caracteres.</p>
                    </div>
                    <div class="form-group">
                        <label>‚úèÔ∏è Digite seu texto personalizado:</label>
                        <input type="text" id="plateTextInput" maxlength="16" placeholder="Ex: Seu Nome, MEUCAR, LOVE2024..." value="Seu Nome">
                    </div>
                    
                </div>

                <!-- Step 2: Country Text -->
                <div class="step-form" id="step2">
                    <div class="step-instructions">
                        <h3>üåé Personalize a Barra Superior</h3>
                        <p>Este texto aparecer√° na barra azul superior da placa, como no padr√£o Mercosul. Voc√™ pode manter "BRASIL" ou personalizar com seu nome, cidade, etc.</p>
                    </div>
                    <div class="form-group">
                        <label>üè∑Ô∏è Texto da barra superior:</label>
                        <input type="text" id="countryTextInput" maxlength="20" placeholder="Ex: BRASIL, MERCOSUL, SEU NOME..." value="BRASIL">
                    </div>
                </div>

                <!-- Step 3: Colors -->
                <div class="step-form" id="step3">
                    <div class="step-instructions">
                        <h3>üé® Escolha as Cores</h3>
                        <p>Personalize as cores para deixar seu chaveiro √∫nico. Voc√™ pode escolher cores diferentes para o texto principal e para a barra superior.</p>
                    </div>
                    <div class="form-group">
                        <label>üñåÔ∏è Cor do texto principal:</label>
                        <input type="color" id="textColor" class="color-picker" value="#000000">
                    </div>
                    <div class="form-group">
                        <label>üé® Cor da barra superior:</label>
                        <input type="color" id="barColor" class="color-picker" value="#1a4a7a">
                    </div>
                </div>

                <!-- Step 4: Font Settings -->
                <div class="step-form" id="step4">
                    <div class="step-instructions">
                        <h3>üî§ Configura√ß√µes da Fonte</h3>
                        <p>Ajuste o tamanho e estilo da fonte para que o texto fique perfeito na sua placa personalizada.</p>
                    </div>
                    <div class="form-group">
                        <label>üìè Tamanho da fonte:</label>
                        <select id="fontSize">
    <option value="1.87em">Tamanho 1</option>
    <option value="2.33em">Tamanho 2</option>
    <option value="2.8em" selected>Tamanho 3</option>
    <option value="3.2em">Tamanho 4</option>
    <option value="3.67em">Tamanho 5</option>
    <option value="4.13em">Tamanho 6</option>
</select>
                    </div>
                    <div class="form-group">
                        <label>‚úçÔ∏è Estilo da fonte:</label>
                        <select id="fontFamily">
                            <option value="'Arial Black', Arial, sans-serif">Moderno (Arial Black)</option>
                            <option value="'FE-FONT', Arial, sans-serif">Oficial Mercosul</option>
                            <option value="'Poppins', sans-serif">Elegante (Poppins)</option>
                            <option value="'Impact', sans-serif">Impacto</option>
                        </select>
                    </div>
                </div>

                <!-- Step 5: Text Position -->
                <div class="step-form" id="step5">
                    <div class="step-instructions">
                        <h3>üìç Posi√ß√£o do Texto</h3>
                        <p>Escolha onde o texto principal deve aparecer na placa. Clique em uma das op√ß√µes abaixo para posicionar o texto.</p>
                    </div>
                    <div class="form-group">
                        <label>üéØ Escolha a posi√ß√£o:</label>
                        <div class="position-controls">
                            <div class="position-btn" onclick="selectPosition('up-left')" data-position="up-left">‚ÜñÔ∏è</div>
                            <div class="position-btn" onclick="selectPosition('up')" data-position="up">‚¨ÜÔ∏è</div>
                            <div class="position-btn" onclick="selectPosition('up-right')" data-position="up-right">‚ÜóÔ∏è</div>
                            <div class="position-btn" onclick="selectPosition('left')" data-position="left">‚¨ÖÔ∏è</div>
                            <div class="position-btn selected" onclick="selectPosition('center')" data-position="center">üéØ</div>
                            <div class="position-btn" onclick="selectPosition('right')" data-position="right">‚û°Ô∏è</div>
                            <div class="position-btn" onclick="selectPosition('down-left')" data-position="down-left">‚ÜôÔ∏è</div>
                            <div class="position-btn" onclick="selectPosition('down')" data-position="down">‚¨áÔ∏è</div>
                            <div class="position-btn" onclick="selectPosition('down-right')" data-position="down-right">‚ÜòÔ∏è</div>
                        </div>
                    </div>
                </div>

                <!-- Step 6: Add Emoji -->
                <div class="step-form" id="step6">
                    <div class="step-instructions">
                        <h3>üé≠ Adicionar Decora√ß√£o</h3>
                        <p>Adicione um emoji ou s√≠mbolo especial para deixar seu chaveiro ainda mais personalizado. Escolha uma categoria e clique no emoji desejado.</p>
                    </div>
                    <div class="form-group">
                        <label>üé® Escolha uma categoria:</label>
                        <div class="emoji-categories">
                            <div class="emoji-category active" onclick="showEmojiCategory('veiculos')">üöó Ve√≠culos</div>
                            <div class="emoji-category" onclick="showEmojiCategory('simbolos')">‚≠ê S√≠mbolos</div>
                            <div class="emoji-category" onclick="showEmojiCategory('coracao')">‚ù§Ô∏è Amor</div>
                            <div class="emoji-category" onclick="showEmojiCategory('natureza')">üåü Natureza</div>
                        </div>
                        <div class="emoji-grid" id="emojiGrid">
                            <div class="emoji-btn" onclick="selectEmoji('üöó')">üöó</div>
                            <div class="emoji-btn" onclick="selectEmoji('üèéÔ∏è')">üèéÔ∏è</div>
                            <div class="emoji-btn" onclick="selectEmoji('üöô')">üöô</div>
                            <div class="emoji-btn" onclick="selectEmoji('üõª')">üõª</div>
                            <div class="emoji-btn" onclick="selectEmoji('üèÅ')">üèÅ</div>
                            <div class="emoji-btn" onclick="selectEmoji('üöÄ')">üöÄ</div>
                        </div>
                    </div>
                    <div style="text-align: center; margin-top: 20px;">
                        <button onclick="selectEmoji('')" style="background: var(--danger); color: white; border: none; padding: 15px 30px; border-radius: 15px; cursor: pointer;">
                            üö´ N√£o adicionar decora√ß√£o
                        </button>
                    </div>
                </div>

                <!-- Step 7: Emoji Position -->
                <div class="step-form" id="step7">
                    <div class="step-instructions">
                        <h3>üéØ Posi√ß√£o da Decora√ß√£o</h3>
                        <p>Agora escolha onde a decora√ß√£o deve aparecer na placa. Voc√™ pode posicion√°-la em qualquer canto ou lado da placa.</p>
                    </div>
                    <div class="form-group">
                        <label>üìç Posi√ß√£o da decora√ß√£o:</label>
                        <div class="position-controls">
                            <div class="position-btn" onclick="selectEmojiPosition('up-left')" data-emoji-position="up-left">‚ÜñÔ∏è</div>
                            <div class="position-btn" onclick="selectEmojiPosition('up')" data-emoji-position="up">‚¨ÜÔ∏è</div>
                            <div class="position-btn" onclick="selectEmojiPosition('up-right')" data-emoji-position="up-right">‚ÜóÔ∏è</div>
                            <div class="position-btn" onclick="selectEmojiPosition('left')" data-emoji-position="left">‚¨ÖÔ∏è</div>
                            <div class="position-btn" onclick="selectEmojiPosition('center')" data-emoji-position="center">üéØ</div>
                            <div class="position-btn selected" onclick="selectEmojiPosition('right')" data-emoji-position="right">‚û°Ô∏è</div>
                            <div class="position-btn" onclick="selectEmojiPosition('down-left')" data-emoji-position="down-left">‚ÜôÔ∏è</div>
                            <div class="position-btn" onclick="selectEmojiPosition('down')" data-emoji-position="down">‚¨áÔ∏è</div>
                            <div class="position-btn" onclick="selectEmojiPosition('down-right')" data-emoji-position="down-right">‚ÜòÔ∏è</div>
                        </div>
                    </div>
                </div>

                <!-- Step 8: Final Review -->
                <div class="step-form" id="step8">
                    <div class="step-instructions">
                        <h3>‚úÖ Revis√£o Final</h3>
                        <p>Confira todos os detalhes do seu chaveiro personalizado. Se estiver tudo certo, finalize seu pedido!</p>
                    </div>
                    <div id="finalReview" style="background: rgba(255,255,255,0.05); padding: 25px; border-radius: 15px; color: white;">
                        <h4 style="margin-bottom: 20px; color: var(--primary);">üìã Resumo do Pedido:</h4>
                        <div style="display: grid; gap: 10px;">
                            <div><strong>Texto principal:</strong> <span id="reviewText">Seu Nome</span></div>
                            <div><strong>Texto da barra:</strong> <span id="reviewCountry">BRASIL</span></div>
                            <div><strong>Cor do texto:</strong> <span id="reviewTextColor">#000000</span></div>
                            <div><strong>Cor da barra:</strong> <span id="reviewBarColor">#1a4a7a</span></div>
                            <div><strong>Tamanho da fonte:</strong> <span id="reviewFontSize">48px</span></div>
                            <div><strong>Decora√ß√£o:</strong> <span id="reviewEmoji">Nenhuma</span></div>
                        </div>
                    </div>
                    <div style="text-align: center; margin-top: 30px;">
                        <button class="nav-btn btn-finish" onclick="addToCart()" style="width: 100%; font-size: 20px; padding: 25px;">
                            üõí ADICIONAR AO CARRINHO - R$ 14,90
                        </button>
                    </div>
                </div>

                <!-- Navigation -->
                <div class="step-navigation">
                    <button class="nav-btn btn-prev" id="prevBtn" onclick="prevStep()" disabled>
                        ‚Üê Anterior
                    </button>
                    <button class="nav-btn btn-next" id="nextBtn" onclick="nextStep()">
                        Pr√≥ximo ‚Üí
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Variables
        let currentStep = 1;
        const totalSteps = 8;
        let textPosition = { x: 50, y: 50 };
        let emojiPosition = { x: 70, y: 30 };
        let currentEmoji = '';
        let selectedTextPosition = 'center';
        let selectedEmojiPosition = 'right';

        // Step titles and descriptions
        const stepInfo = {
            1: {
                title: "Passo 1: Texto da Placa",
                description: "Digite o texto que aparecer√° na sua placa personalizada"
            },
            2: {
                title: "Passo 2: Barra Superior",
                description: "Personalize o texto da barra superior da placa"
            },
            3: {
                title: "Passo 3: Cores",
                description: "Escolha as cores para o texto e a barra"
            },
            4: {
                title: "Passo 4: Fonte",
                description: "Defina o tamanho e estilo da fonte"
            },
            5: {
                title: "Passo 5: Posi√ß√£o do Texto",
                description: "Escolha onde o texto deve aparecer na placa"
            },
            6: {
                title: "Passo 6: Decora√ß√£o",
                description: "Adicione um emoji ou s√≠mbolo especial"
            },
            7: {
                title: "Passo 7: Posi√ß√£o da Decora√ß√£o",
                description: "Defina onde a decora√ß√£o deve aparecer"
            },
            8: {
                title: "Passo 8: Finalizar",
                description: "Revise seu pedido e adicione ao carrinho"
            }
        };

        // Emoji categories
        const emojiCategories = {
            veiculos: ['üöó', 'üèéÔ∏è', 'üöô', 'üõª', 'üèÅ', 'üöÄ', '‚úàÔ∏è', 'üöÅ', 'üõµ', 'üö≤'],
            simbolos: ['‚≠ê', 'üåü', '‚ú®', 'üí´', 'üéØ', 'üé™', 'üé®', 'üé≠', 'üî•', '‚ö°'],
            coracao: ['‚ù§Ô∏è', 'üíõ', 'üíö', 'üíô', 'üíú', 'üñ§', 'ü§ç', 'üíï', 'üíñ', 'üíó'],
            natureza: ['üåà', '‚òÄÔ∏è', 'üåô', '‚ö°', 'üî•', 'üí®', 'üåä', 'üçÄ', 'üå∏', 'üå∫']
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updatePreview();
            updateStepInfo();
            
            // Add event listeners
            document.getElementById('plateTextInput').addEventListener('input', updatePreview);
            document.getElementById('countryTextInput').addEventListener('input', updatePreview);
            document.getElementById('textColor').addEventListener('input', updatePreview);
            document.getElementById('barColor').addEventListener('input', updatePreview);
            document.getElementById('fontSize').addEventListener('change', updatePreview);
            document.getElementById('fontFamily').addEventListener('change', updatePreview);
        });

        function updateStepInfo() {
            document.getElementById('stepTitle').textContent = stepInfo[currentStep].title;
            document.getElementById('stepDescription').textContent = stepInfo[currentStep].description;
            
            // Update progress
            const progress = ((currentStep - 1) / (totalSteps - 1)) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            
            // Update step indicators
            document.querySelectorAll('.step-indicator').forEach(indicator => {
                const step = parseInt(indicator.dataset.step);
                indicator.classList.remove('active', 'completed');
                
                if (step === currentStep) {
                    indicator.classList.add('active');
                } else if (step < currentStep) {
                    indicator.classList.add('completed');
                    indicator.innerHTML = '‚úì';
                } else {
                    indicator.innerHTML = step;
                }
            });
        }

        function nextStep() {
            if (currentStep < totalSteps) {
                // Hide current step
                document.getElementById(`step${currentStep}`).classList.remove('active');
                
                currentStep++;
                
                // Show next step
                document.getElementById(`step${currentStep}`).classList.add('active');
                
                updateStepInfo();
                updateNavigationButtons();
                updateFinalReview();
                
                // Special handling for step 7 (emoji position)
                if (currentStep === 7 && !currentEmoji) {
                    // Skip emoji positioning if no emoji selected
                    nextStep();
                }
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                // Hide current step
                document.getElementById(`step${currentStep}`).classList.remove('active');
                
                currentStep--;
                
                // Show previous step
                document.getElementById(`step${currentStep}`).classList.add('active');
                
                updateStepInfo();
                updateNavigationButtons();
                
                // Special handling for step 7 (emoji position)
                if (currentStep === 6 && document.getElementById(`step${currentStep + 1}`).style.display === 'none') {
                    // If coming back from a skipped step 7
                    currentStep = 6;
                }
            }
        }

        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            prevBtn.disabled = currentStep === 1;
            
            if (currentStep === totalSteps) {
                nextBtn.style.display = 'none';
            } else {
                nextBtn.style.display = 'block';
                nextBtn.textContent = 'Pr√≥ximo ‚Üí';
            }
        }

        function updatePreview() {
            const text = document.getElementById('plateTextInput').value || 'Seu Nome';
            const countryText = document.getElementById('countryTextInput').value || 'BRASIL';
            const textColor = document.getElementById('textColor').value;
            const barColor = document.getElementById('barColor').value;
            const fontSize = document.getElementById('fontSize').value;
            const fontFamily = document.getElementById('fontFamily').value;

            const plateText = document.getElementById('plateText');
            const plateEmoji = document.getElementById('plateEmoji');
            const countryTextEl = document.getElementById('countryText');
            const mercosulBand = document.getElementById('mercosulBand');

            plateText.textContent = text;
            plateText.style.color = textColor;
            plateText.style.fontSize = fontSize;
            plateText.style.fontFamily = fontFamily;

            // Apply text position
            applyTextPosition();
            
            plateEmoji.textContent = currentEmoji;
            
            // Apply emoji position
            applyEmojiPosition();
            
            countryTextEl.textContent = countryText.toUpperCase();
            mercosulBand.style.background = `linear-gradient(135deg, ${barColor} 0%, ${adjustBrightness(barColor, 20)} 50%, ${barColor} 100%)`;
        }

        function adjustBrightness(hex, percent) {
            hex = hex.replace('#', '');
            const r = parseInt(hex.substr(0, 2), 16);
            const g = parseInt(hex.substr(2, 2), 16);
            const b = parseInt(hex.substr(4, 2), 16);
            
            const newR = Math.min(255, Math.max(0, r + (r * percent / 100)));
            const newG = Math.min(255, Math.max(0, g + (g * percent / 100)));
            const newB = Math.min(255, Math.max(0, b + (b * percent / 100)));
            
            return '#' + 
                Math.round(newR).toString(16).padStart(2, '0') +
                Math.round(newG).toString(16).padStart(2, '0') +
                Math.round(newB).toString(16).padStart(2, '0');
        }

        function setSuggestion(text) {
            document.getElementById('plateTextInput').value = text;
            updatePreview();
        }

        function selectPosition(position) {
            selectedTextPosition = position;
            
            // Update UI
            document.querySelectorAll('[data-position]').forEach(btn => {
                btn.classList.remove('selected');
            });
            document.querySelector(`[data-position="${position}"]`).classList.add('selected');
            
            applyTextPosition();
        }

        function applyTextPosition() {
            const plateText = document.getElementById('plateText');
            
            // CORRE√á√ÉO: Posi√ß√µes ajustadas para √°rea branca apenas
            switch(selectedTextPosition) {
                case 'up-left':
                    textPosition = { x: 25, y: 25 };
                    break;
                case 'up':
                    textPosition = { x: 50, y: 25 };
                    break;
                case 'up-right':
                    textPosition = { x: 75, y: 25 };
                    break;
                case 'left':
                    textPosition = { x: 25, y: 50 };
                    break;
                case 'center':
                    textPosition = { x: 50, y: 50 };
                    break;
                case 'right':
                    textPosition = { x: 75, y: 50 };
                    break;
                case 'down-left':
                    textPosition = { x: 25, y: 75 };
                    break;
                case 'down':
                    textPosition = { x: 50, y: 75 };
                    break;
                case 'down-right':
                    textPosition = { x: 75, y: 75 };
                    break;
            }
            
            plateText.style.left = textPosition.x + '%';
            plateText.style.top = textPosition.y + '%';
        }

        function showEmojiCategory(category) {
            const grid = document.getElementById('emojiGrid');
            const emojis = emojiCategories[category];
            
            // Update active category
            document.querySelectorAll('.emoji-category').forEach(cat => {
                cat.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Update emoji grid
            grid.innerHTML = '';
            emojis.forEach(emoji => {
                const btn = document.createElement('div');
                btn.className = 'emoji-btn';
                if (emoji === currentEmoji) {
                    btn.classList.add('selected');
                }
                btn.onclick = () => selectEmoji(emoji);
                btn.textContent = emoji;
                grid.appendChild(btn);
            });
        }

        function selectEmoji(emoji) {
            currentEmoji = emoji;
            
            // Update UI
            document.querySelectorAll('.emoji-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            if (emoji && event && event.target) {
                event.target.classList.add('selected');
            }
            
            updatePreview();
        }

        function selectEmojiPosition(position) {
            selectedEmojiPosition = position;
            
            // Update UI
            document.querySelectorAll('[data-emoji-position]').forEach(btn => {
                btn.classList.remove('selected');
            });
            document.querySelector(`[data-emoji-position="${position}"]`).classList.add('selected');
            
            applyEmojiPosition();
        }

        function applyEmojiPosition() {
            const plateEmoji = document.getElementById('plateEmoji');
            
            // CORRE√á√ÉO: Posi√ß√µes ajustadas para √°rea branca apenas
            switch(selectedEmojiPosition) {
                case 'up-left':
                    emojiPosition = { x: 15, y: 20 };
                    break;
                case 'up':
                    emojiPosition = { x: 50, y: 20 };
                    break;
                case 'up-right':
                    emojiPosition = { x: 85, y: 20 };
                    break;
                case 'left':
                    emojiPosition = { x: 15, y: 50 };
                    break;
                case 'center':
                    emojiPosition = { x: 50, y: 50 };
                    break;
                case 'right':
                    emojiPosition = { x: 85, y: 50 };
                    break;
                case 'down-left':
                    emojiPosition = { x: 15, y: 80 };
                    break;
                case 'down':
                    emojiPosition = { x: 50, y: 80 };
                    break;
                case 'down-right':
                    emojiPosition = { x: 85, y: 80 };
                    break;
            }
            
            plateEmoji.style.left = emojiPosition.x + '%';
            plateEmoji.style.top = emojiPosition.y + '%';
        }

        function updateFinalReview() {
            if (currentStep === 8) {
                document.getElementById('reviewText').textContent = document.getElementById('plateTextInput').value || 'ABC1234';
                document.getElementById('reviewCountry').textContent = document.getElementById('countryTextInput').value || 'BRASIL';
                document.getElementById('reviewTextColor').textContent = document.getElementById('textColor').value;
                document.getElementById('reviewBarColor').textContent = document.getElementById('barColor').value;
                document.getElementById('reviewFontSize').textContent = document.getElementById('fontSize').value + 'px';
                document.getElementById('reviewEmoji').textContent = currentEmoji || 'Nenhuma';
            }
        }

        function addToCart() {
            // Create notification
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: linear-gradient(135deg, var(--success), #059669);
                color: white;
                padding: 40px 60px;
                border-radius: 20px;
                box-shadow: 0 20px 60px rgba(0,0,0,0.5);
                font-weight: 600;
                font-size: 1.5rem;
                z-index: 3000;
                text-align: center;
                animation: bounceIn 0.5s ease;
                backdrop-filter: blur(20px);
            `;
            notification.innerHTML = `
                <div style="font-size: 4rem; margin-bottom: 20px;">‚úÖ</div>
                <div>Chaveiro Adicionado ao Carrinho!</div>
                <div style="font-size: 1rem; margin-top: 15px; opacity: 0.9;">Seu pedido foi criado com sucesso</div>
            `;
            
            // Add CSS animation
            const style = document.createElement('style');
            style.textContent = `
                @keyframes bounceIn {
                    0% { transform: translate(-50%, -50%) scale(0); }
                    50% { transform: translate(-50%, -50%) scale(1.1); }
                    100% { transform: translate(-50%, -50%) scale(1); }
                }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
                style.remove();
            }, 3000);
        }

        // Initialize navigation buttons
        updateNavigationButtons();
    </script>
</body>
</html>
